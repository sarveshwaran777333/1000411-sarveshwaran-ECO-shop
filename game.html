<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Robo Runner</title>
<style>
  body {
    margin: 0;
    background: #eaf4e4;
    font-family: Arial, sans-serif;
    text-align: center;
  }
  canvas {
    display: none;
    margin: auto;
    background: #eaf4e4;
  }
  #menu, #gameUI {
    position: absolute;
    width: 100%;
    top: 0;
    left: 0;
  }
  #menu {
    height: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }
  button {
    padding: 12px 22px;
    font-size: 18px;
    margin-top: 12px;
    cursor: pointer;
  }
  #gameUI {
    display: none;
    padding: 10px;
    font-weight: bold;
  }
</style>
</head>
<body>

<!-- MAIN MENU -->
<div id="menu">
  <h1>ðŸ¤– ROBO RUNNER</h1>
  <p>Jump over obstacles and collect coins</p>
  <button onclick="startGame()">START GAME</button>
</div>

<!-- GAME UI -->
<div id="gameUI">
  Coins: <span id="coins">0</span>
  <button onclick="togglePause()">Pause</button>
</div>

<canvas id="game" width="900" height="400"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const roboImg = new Image();
roboImg.src = "ROBO.png";

let gameStarted = false;
let gameOver = false;
let paused = false;
let coins = 0;

const groundY = 330;
const gravity = 0.6;
const jumpPower = -12;
let speed = 4;

const player = {
  x: 100,
  y: 300,
  w: 50,
  h: 60,
  vy: 0,
  onGround: true
};

let blocks = [];
let spikes = [];
let coinList = [];

function startGame() {
  document.getElementById("menu").style.display = "none";
  document.getElementById("gameUI").style.display = "block";
  canvas.style.display = "block";
  gameStarted = true;
}

function togglePause() {
  paused = !paused;
}

function restartGame() {
  gameOver = false;
  paused = false;
  coins = 0;
  player.y = 300;
  player.vy = 0;
  blocks = [];
  spikes = [];
  coinList = [];
  document.getElementById("coins").textContent = coins;
}

document.addEventListener("keydown", e => {
  if (!gameStarted) return;

  if (e.code === "Space" && !gameOver) {
    if (player.onGround) {
      player.vy = jumpPower;
      player.onGround = false;
    }
  }

  if (e.key === "r" && gameOver) {
    restartGame();
  }
});

function spawnBlock() {
  blocks.push({ x: 900, y: 300, w: 40, h: 40 });
}
function spawnSpike() {
  spikes.push({ x: 900, y: 320, size: 20 });
}
function spawnCoin() {
  const y = Math.random() < 0.6 ? 315 : 270;
  coinList.push({ x: 900, y, r: 8, collected: false });
}

function update() {
  if (!gameStarted || paused || gameOver) return;

  player.vy += gravity;
  player.y += player.vy;

  if (player.y >= groundY - player.h) {
    player.y = groundY - player.h;
    player.vy = 0;
    player.onGround = true;
  }

  blocks.forEach(b => b.x -= speed);
  spikes.forEach(s => s.x -= speed);
  coinList.forEach(c => c.x -= speed);

  blocks.forEach(b => {
    if (
      player.x + player.w > b.x &&
      player.x < b.x + b.w &&
      player.y + player.h <= b.y + 10 &&
      player.y + player.h + player.vy >= b.y
    ) {
      player.y = b.y - player.h;
      player.vy = 0;
      player.onGround = true;
    }
  });

  spikes.forEach(s => {
    if (
      player.x < s.x + s.size &&
      player.x + player.w > s.x &&
      player.y + player.h > s.y
    ) {
      gameOver = true;
    }
  });

  coinList.forEach(c => {
    if (!c.collected) {
      const dx = player.x + player.w / 2 - c.x;
      const dy = player.y + player.h / 2 - c.y;
      if (Math.sqrt(dx * dx + dy * dy) < 20) {
        c.collected = true;
        coins++;
        document.getElementById("coins").textContent = coins;
      }
    }
  });

  blocks = blocks.filter(b => b.x > -50);
  spikes = spikes.filter(s => s.x > -50);
  coinList = coinList.filter(c => c.x > -50 && !c.collected);

  if (Math.random() < 0.01) spawnBlock();
  if (Math.random() < 0.008) spawnSpike();
  if (Math.random() < 0.012) spawnCoin();
}

function draw() {
  if (!gameStarted) return;

  ctx.clearRect(0, 0, canvas.width, canvas.height);

  ctx.fillStyle = "#6ab04c";
  ctx.fillRect(0, groundY, canvas.width, 5);

  ctx.fillStyle = "rgba(0,150,255,0.3)";
  ctx.fillRect(player.x - 18, player.y + 18, 14, 6);

  ctx.drawImage(roboImg, player.x, player.y, player.w, player.h);

  ctx.fillStyle = "#8e6e53";
  blocks.forEach(b => ctx.fillRect(b.x, b.y, b.w, b.h));

  ctx.fillStyle = "red";
  spikes.forEach(s => {
    ctx.beginPath();
    ctx.moveTo(s.x, s.y);
    ctx.lineTo(s.x + s.size, s.y);
    ctx.lineTo(s.x + s.size / 2, s.y - s.size);
    ctx.closePath();
    ctx.fill();
  });

  ctx.fillStyle = "gold";
  coinList.forEach(c => {
    ctx.beginPath();
    ctx.arc(c.x, c.y, c.r, 0, Math.PI * 2);
    ctx.fill();
  });

  if (paused) {
    ctx.fillStyle = "rgba(0,0,0,0.4)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "white";
    ctx.font = "30px Arial";
    ctx.fillText("PAUSED", 390, 200);
  }

  if (gameOver) {
    ctx.fillStyle = "rgba(0,0,0,0.6)";
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "white";
    ctx.font = "30px Arial";
    ctx.fillText("GAME OVER", 350, 180);
    ctx.font = "18px Arial";
    ctx.fillText("Press R to Restart", 350, 215);
  }
}

function loop() {
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();
</script>
</body>
</html>
